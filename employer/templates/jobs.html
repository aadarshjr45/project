{% extends 'employer_dashboard.html' %}


{% block content %}
{% include 'sidebar.html' %}

{% if jobs %}

<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h5">Dashboard</h1>
  </div>
  <h4>Hi there,</h4>
  <h5>{{ request.user }}</h5>
  {% for job in jobs %}

  <div class="row g-4 row-cols-2 row-cols-lg-3">
    <div class="feature col">
      <div class="px-4 py-5 my-5 text-center" style="background-color: #edf0f3; border-radius:20px;">
        <!-- <img class="d-block mx-auto mb-4" src="/docs/5.3/assets/brand/bootstrap-logo.svg" alt="" width="72" height="57"> -->
        <img class="" src="{{ job.logo.url }}" width="150px" height="120px" />
        <h5 class="fw-semibold fs-6">{{job.title}}</h5>
        <h5 class="fw-semibold fs-6">{{job.description}}</h5>
      </div>
    </div>

  </div>
  {% endfor %}

</main>





{% else %}
<p>You have not posted any jobs yet.</p>
{% endif %}



<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Delete Job</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are You Sure?
        <form id="delete-form" method="post" action="{% url 'jobs:delete_job' %}">{%csrf_token%}
          <input type="hidden" name="jobid" id="_jobid" />
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
        <button type="button" class="btn btn-danger btn-md" id="delete-button">Yes</button>

      </div>
    </div>
  </div>
</div>
</div>

{% endblock %}

{% block script%}
{{ block.super }}
<script type="text/javascript">
  $(document).ready(function () {
    $.ajax({
      url: '/demo-for-ajax/',
      type: 'GET',
      dataType: 'json',
      success: function (res) {
        console.log(res);
      },
      error: function (res) {
        console.log(res);
      }
    })
    let modal = document.getElementById("exampleModal");
    modal.addEventListener("show.bs.modal", function (evt) {
      let btn = evt.relatedTarget;
      let jobid = btn.dataset.jobid;
      $("#_jobid").val(jobid);
    });

    $("#delete-button").click(function () {
      $("#delete-form").submit();
    });
  });
</script>
{% endblock script %}